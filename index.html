<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PARALLEL LEE</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@900&family=Noto+Sans+KR:wght@700&display=swap"
        rel="stylesheet">
    <style>
        /* 1. ë³€ìˆ˜ ì„¤ì • */
        :root {
            --bg-color: #ffffff;
            --text-color: #000000;
            --grid-color: rgba(0, 0, 0, 0.05);
            --shadow-color: rgba(0, 0, 0, 0.2);
            --p-yellow: #FFD700;
            --p-red: #FF0055;
            --p-blue: #0099FF;
            --p-black: #000000;
            --p-gray: #aaaaaa;
            --bs-blue: #0022AA;
        }

        body.dark-mode {
            --bg-color: #0a0a0a;
            --text-color: #ffffff;
            --grid-color: rgba(255, 255, 255, 0.05);
            --shadow-color: rgba(255, 255, 255, 0.2);
            --p-black: #ffffff;
        }

        /* ìŠ¤í¬ë¡¤ ì›ì²œ ë´‰ì‡„ */
        html,
        body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            position: fixed;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Montserrat', sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: background-color 0.5s ease, color 0.5s ease;
            cursor: crosshair;
            touch-action: none;
            -webkit-tap-highlight-color: transparent;
        }

        body.allow-scroll .content-layer {
            pointer-events: auto;
            overflow-y: auto;
        }

        .grid-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: linear-gradient(var(--grid-color) 1px, transparent 1px), linear-gradient(90deg, var(--grid-color) 1px, transparent 1px);
            background-size: 40px 40px;
            z-index: -10;
            pointer-events: none;
            transition: opacity 0.3s;
        }

        body.hide-grid .grid-bg {
            opacity: 0;
        }

        /* 2. ë„í˜• êµ¬ì¡° */
        .positioner {
            position: absolute;
            z-index: 15;
            /* ì•ìœ¼ë¡œ íŠ€ì–´ë‚˜ì˜´ */
            cursor: grab;
            /* ì†ë°”ë‹¥ ëª¨ì–‘ */
            top: 50%;
            left: 50%;
            transition: transform 0.8s cubic-bezier(0.2, 0.8, 0.2, 1), opacity 0.5s;
        }

        .floater {
            width: 100%;
            height: 100%;
        }

        .shape {
            display: block;
            opacity: 0.9;
            will-change: transform;
            transition: transform 0.1s linear;
        }

        body.paused .floater {
            animation-play-state: paused !important;
        }

        /* [ì±…ìƒ ì •ë¦¬] clampë¡œ ì´ë™ ê±°ë¦¬ ì œì–´ */
        body.cleared .pos-triangle {
            transform: translate(clamp(-120px, -15vmin, -40px), clamp(-120px, -15vmin, -40px)) !important;
            opacity: 0.15;
        }

        body.cleared .pos-circle {
            transform: translate(clamp(40px, 15vmin, 120px), clamp(40px, 15vmin, 120px)) !important;
            opacity: 0.15;
        }

        body.cleared .pos-pause {
            transform: translate(clamp(40px, 15vmin, 140px), clamp(-120px, -15vmin, -40px)) !important;
            opacity: 0.15;
        }

        .main-content-wrapper {
            text-align: center;
            z-index: 10;
            transition: transform 0.8s cubic-bezier(0.2, 0.8, 0.2, 1), opacity 0.5s;
        }

        body.cleared .main-content-wrapper {
            transform: translateY(-10vh) scale(0.9);
            opacity: 0.15;
            pointer-events: none;
        }

        /* ì‹œìŠ¤í…œ ë²„íŠ¼ íë¦¬ê²Œ */
        body.cleared .system-status {
            opacity: 0.15;
            pointer-events: none;
        }

        /* ê°€ì ¯ ë²„íŠ¼ë“¤ íë¦¬ê²Œ */
        body.cleared .control-panel {
            opacity: 0.15;
            pointer-events: none;
        }

        .nav {
            margin-top: 50px;
            display: flex;
            gap: clamp(20px, 5vmin, 60px);
            z-index: 20;
            transition: transform 0.8s cubic-bezier(0.2, 0.8, 0.2, 1), opacity 0.5s;
        }

        body.cleared .nav {
            transform: translateY(10vh);
            opacity: 0.15;
            pointer-events: none;
        }


        /* [TRUE FLUID MATH - vminìœ¼ë¡œ ëŒ€ë™ë‹¨ê²°] */

        /* ë…¸ë€ ì„¸ëª¨ (ì™¼ìª½ ìœ„) */
        .pos-triangle {
            margin-left: clamp(-500px, -45vmin, -120px);
            margin-top: clamp(-350px, -30vmin, -100px);
        }

        .float-triangle {
            animation: float-tri 12s ease-in-out infinite alternate;
        }

        .shape-triangle {
            width: 0;
            height: 0;
            border-left: clamp(80px, 10vmin, 140px) solid transparent;
            border-right: clamp(80px, 10vmin, 140px) solid transparent;
            border-bottom: clamp(144px, 18vmin, 252px) solid var(--p-yellow);
            transform: rotate(-15deg);
            filter: drop-shadow(8px 8px 0px var(--shadow-color));
        }

        /* ë¹¨ê°„ ì› (ì˜¤ë¥¸ìª½ ì•„ë˜) */
        .pos-circle {
            margin-left: clamp(80px, 25vmin, 350px);
            margin-top: clamp(90px, 20vmin, 250px);
        }

        .float-circle {
            animation: float-circ 15s ease-in-out infinite alternate-reverse;
        }

        .shape-circle-shadow {
            filter: drop-shadow(8px 8px 0px var(--shadow-color));
        }

        .shape-circle-inner {
            width: clamp(80px, 12vmin, 200px);
            height: clamp(80px, 12vmin, 200px);
            background-color: var(--p-red);
            border-radius: 50%;
            -webkit-mask-image: radial-gradient(circle at 50% 38%, transparent 15%, black 16%);
            mask-image: radial-gradient(circle at 50% 38%, transparent 15%, black 16%);
        }

        /* íŒŒë€ ë§‰ëŒ€ (ì˜¤ë¥¸ìª½ ìœ„) */
        .pos-pause {
            margin-left: clamp(60px, 22vmin, 300px);
            margin-top: clamp(-300px, -22vmin, -80px);
        }

        .float-pause {
            animation: float-pause 14s ease-in-out infinite alternate;
        }

        .shape-pause-container {
            display: flex;
            gap: clamp(10px, 1.5vmin, 25px);
            transform: rotate(10deg);
        }

        .shape-pause-bar {
            width: clamp(20px, 3vmin, 45px);
            height: clamp(120px, 16vmin, 260px);
            background-color: var(--p-blue);
            box-shadow: 8px 8px 0px var(--shadow-color);
        }

        @keyframes float-tri {
            0% {
                transform: rotate(-5deg) translate(0, 0);
            }

            100% {
                transform: rotate(5deg) translate(20px, -20px);
            }
        }

        @keyframes float-circ {
            0% {
                transform: translate(0, 0);
            }

            100% {
                transform: translate(-15px, 15px);
            }
        }

        @keyframes float-pause {
            0% {
                transform: rotate(-5deg) translate(0, 0);
            }

            100% {
                transform: rotate(5deg) translate(10px, -10px);
            }
        }

        /* UI ìš”ì†Œ */
        .glitch-wrapper {
            position: relative;
            cursor: pointer;
            user-select: none;
            display: inline-block;
        }

        .glitch {
            font-size: clamp(3rem, 10vmin, 7rem);
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: -0.02em;
            position: relative;
            display: inline-block;
        }

        @media (hover: hover) {

            .glitch-wrapper:hover .glitch,
            .glitch-wrapper.glitching-active .glitch {
                text-shadow: -4px -4px 0 var(--p-yellow), 4px -4px 0 var(--p-red), 0px 4px 0 var(--p-blue);
                animation: glitch-shake 0.1s infinite;
            }
        }

        .glitch-wrapper.glitching-active .glitch {
            text-shadow: -4px -4px 0 var(--p-yellow), 4px -4px 0 var(--p-red), 0px 4px 0 var(--p-blue);
            animation: glitch-shake 0.1s infinite;
        }

        @keyframes glitch-shake {
            0% {
                transform: translate(1px, 1px);
            }

            50% {
                transform: translate(-1px, 1px);
            }

            100% {
                transform: translate(0, 0);
            }
        }

        .role-container {
            margin-top: 15px;
            display: inline-flex;
            gap: 8px;
            justify-content: center;
            align-items: center;
            font-family: 'Noto Sans KR', sans-serif;
            font-size: clamp(0.8rem, 2vmin, 1.3rem);
            font-weight: 700;
            background: var(--p-black);
            color: var(--bg-color);
            padding: 8px 25px;
            transform: skewX(-10deg);
            transition: background 0.3s, color 0.3s;
        }

        .role-item {
            transform: skewX(10deg);
        }

        .role-dot {
            transform: skewX(10deg);
            font-size: 0.8rem;
            color: var(--p-gray);
        }

        .nav {
            margin-top: 50px;
            display: flex;
            gap: clamp(20px, 5vmin, 60px);
            z-index: 20;
            transition: transform 0.8s cubic-bezier(0.2, 0.8, 0.2, 1), opacity 0.5s;
        }

        .nav-link {
            text-decoration: none;
            color: var(--text-color);
            font-size: clamp(1rem, 2.5vmin, 1.5rem);
            font-weight: 900;
            text-transform: uppercase;
            position: relative;
            transition: 0.3s;
            cursor: pointer;
            padding: 10px;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 5px;
            left: 10px;
            right: 10px;
            height: 4px;
            background-color: currentColor;
            transition: 0.3s;
            width: 0%;
        }

        .nav-link:hover::after {
            width: calc(100% - 20px);
        }

        @media (hover: hover) {
            .nav-link[data-target="projects"]:hover {
                color: var(--p-yellow);
                transform: scale(1.1) rotate(-2deg);
            }

            .nav-link[data-target="resume"]:hover {
                color: var(--p-red);
                transform: scale(1.1) rotate(2deg);
            }

            .nav-link[data-target="link"]:hover {
                color: var(--p-blue);
                transform: scale(1.1) rotate(-2deg);
            }
        }

        .content-layer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.6s cubic-bezier(0.2, 0.8, 0.2, 1);
            z-index: 100;
            padding: 20px;
            box-sizing: border-box;
        }

        body.cleared .content-layer {
            opacity: 1;
            pointer-events: auto;
        }

        .content-box {
            max-width: 900px;
            width: 85%;
            max-height: 70vh;
            background: rgba(255, 255, 255, 0.95);
            color: #000;
            padding: clamp(20px, 5vmin, 40px);
            border: 2px solid var(--p-black);
            box-shadow: 15px 15px 0px var(--shadow-color);
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }

        body.dark-mode .content-box {
            background: rgba(0, 0, 0, 0.95);
            color: #fff;
            border: 2px solid var(--p-black);
        }

        .content-layer h2 {
            font-size: clamp(2.5rem, 6vmin, 4rem);
            margin-bottom: 20px;
            text-transform: uppercase;
            text-shadow: 2px 2px 0px var(--shadow-color);
            text-align: center;
            transition: color 0.3s;
        }

        .content-box p {
            font-family: 'Montserrat', sans-serif;
            font-size: clamp(1.5rem, 3vmin, 2.5rem);
            font-weight: 900;
            letter-spacing: -0.05em;
            margin: 0;
            text-align: center;
        }

        .close-btn {
            margin-top: 30px;
            padding: 15px 40px;
            background-color: var(--p-black);
            color: var(--bg-color);
            border: none;
            cursor: pointer;
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            font-size: 1.2rem;
            text-transform: uppercase;
            transition: 0.3s;
            box-shadow: 5px 5px 0px var(--shadow-color);
            flex-shrink: 0;
        }

        @media (hover: hover) {
            .close-btn:hover {
                color: var(--bg-color);
                transform: translate(-2px, -2px);
                box-shadow: 7px 7px 0px var(--shadow-color);
            }
        }

        body.mode-projects .content-layer h2 {
            color: var(--p-yellow);
        }

        body.mode-projects .close-btn:hover {
            background-color: var(--p-yellow);
        }

        body.mode-resume .content-layer h2 {
            color: var(--p-red);
        }

        body.mode-resume .close-btn:hover {
            background-color: var(--p-red);
        }

        body.mode-link .content-layer h2 {
            color: var(--p-blue);
        }

        body.mode-link .close-btn:hover {
            background-color: var(--p-blue);
        }

        .system-status {
            position: fixed;
            top: 30px;
            right: clamp(20px, 5vmin, 40px);
            font-family: 'Montserrat', sans-serif;
            font-weight: 900;
            font-size: clamp(0.8rem, 2vmin, 1rem);
            cursor: pointer;
            user-select: none;
            border: 2px solid var(--text-color);
            padding: 10px 20px;
            text-transform: uppercase;
            transition: 0.3s;
            z-index: 100;
            background: var(--p-white);
        }

        @media (hover: hover) {
            .system-status:hover {
                background-color: var(--text-color);
                color: var(--bg-color);
            }
        }

        .system-status::before {
            content: '';
            display: inline-block;
            width: 10px;
            height: 10px;
            background-color: #00ff41;
            border-radius: 50%;
            margin-right: 10px;
            box-shadow: 0 0 5px #00ff41;
            transition: 0.3s;
        }

        body.dark-mode .system-status::before {
            background-color: var(--bs-blue);
            box-shadow: 0 0 5px var(--bs-blue);
        }

        .cursor-trail {
            position: absolute;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            pointer-events: none;
            transform: translate(-50%, -50%);
            animation: fade-out 0.5s forwards;
            z-index: 999;
        }

        @keyframes fade-out {
            to {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.5);
            }
        }

        .control-panel {
            position: fixed;
            bottom: 40px;
            left: clamp(20px, 5vmin, 40px);
            display: flex;
            flex-direction: column-reverse;
            gap: 20px;
            z-index: 100;
        }

        .ctrl-btn {
            width: clamp(45px, 6vmin, 60px);
            height: clamp(45px, 6vmin, 60px);
            border-radius: 50%;
            border: 2px solid var(--text-color);
            background: var(--p-white);
            color: var(--text-color);
            font-size: 1.8rem;
            cursor: pointer;
            transition: 0.3s;
            box-shadow: none;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 0;
            line-height: 1;
            touch-action: manipulation;
        }

        @media (hover: hover) {
            .ctrl-btn:hover {
                transform: scale(1.1);
                background: var(--p-white);
            }
        }

        .ctrl-btn.active {
            opacity: 0.4;
            transform: scale(0.9);
            background: var(--p-white);
        }

        @media (max-width: 768px) {
            .content-box {
                width: 85vw;
                padding: 25px;
                max-height: 60vh;
            }

            .control-panel {
                bottom: 20px;
                left: 20px;
                gap: 10px;
            }

            .ctrl-btn {
                width: 45px;
                height: 45px;
                font-size: 1.2rem;
            }
        }

        /* ì¤‘ë ¥ì¥ íš¨ê³¼ (Gravity Lens) */
        .gravity-hole {
            position: absolute;
            width: 150px;
            height: 150px;
            border-radius: 50%;
            transform: translate(-50%, -50%) scale(0);
            /* ì²˜ìŒì—” 0 */
            pointer-events: none;
            /* í´ë¦­ í†µê³¼ */
            z-index: 5;
            /* ê·¸ë¦¬ë“œ ìœ„, ë„í˜• ì•„ë˜ */

            /* [í•µì‹¬] ê³µê°„ ì™œê³¡ ì°©ì‹œ íš¨ê³¼ */
            /* ë°°ê²½ì„ íë¦¬ê²Œ ë­‰ê°œì„œ ì™œê³¡ëœ ê²ƒì²˜ëŸ¼ ë³´ì´ê²Œ í•¨ */
            backdrop-filter: blur(3px) contrast(1.2);
            -webkit-backdrop-filter: blur(3px) contrast(1.2);

            /* ì¤‘ë ¥ì¥ í…Œë‘ë¦¬ ëŠë‚Œ */
            border: 2px solid rgba(0, 0, 0, 0.1);
            background: radial-gradient(circle, transparent 0%, rgba(0, 0, 0, 0.05) 100%);

            /* ë¹¨ë ¤ ë“¤ì–´ê°€ëŠ” ì• ë‹ˆë©”ì´ì…˜ */
            animation: gravity-suck 0.6s cubic-bezier(0.22, 1, 0.36, 1) forwards;
        }

        /* ë‹¤í¬ëª¨ë“œì¼ ë•Œ ì¤‘ë ¥ì¥ ìƒ‰ìƒ ë°˜ì „ */
        body.dark-mode .gravity-hole {
            border-color: rgba(255, 255, 255, 0.1);
            background: radial-gradient(circle, transparent 0%, rgba(255, 255, 255, 0.05) 100%);
        }

        /* ì• ë‹ˆë©”ì´ì…˜: ì»¤ì¡Œë‹¤ê°€ -> ìŠ‰ ì‚¬ë¼ì§ */
        @keyframes gravity-suck {
            0% {
                transform: translate(-50%, -50%) scale(0.5);
                opacity: 0;
            }

            20% {
                opacity: 1;
            }

            100% {
                transform: translate(-50%, -50%) scale(2.5);
                opacity: 0;
            }
        }

        /* ë“œë˜ê·¸ ê°€ëŠ¥ í‘œì‹œ */
        .positioner {
            cursor: grab;
        }

        .positioner:active {
            cursor: grabbing;
            z-index: 1000;
            /* ì¡ì€ ê±´ ì œì¼ ìœ„ë¡œ */
        }
    </style>
</head>

<body>
    <div class="grid-bg"></div>
    <div class="system-status" id="systemBtn">SYSTEM: ONLINE</div>
    <div class="control-panel">
        <button class="ctrl-btn" id="btnGrid" title="Toggle Grid [G]">ğŸ•¸ï¸</button>
        <button class="ctrl-btn" id="btnTrail" title="Toggle Trail [T]">âœ¨</button>
        <button class="ctrl-btn" id="btnFreeze" title="Freeze Time [F]">ğŸ§Š</button>
    </div>

    <div class="positioner pos-triangle">
        <div class="floater float-triangle">
            <div class="shape shape-triangle"></div>
        </div>
    </div>
    <div class="positioner pos-circle">
        <div class="floater float-circle">
            <div class="shape shape-circle-shadow">
                <div class="shape-circle-inner"></div>
            </div>
        </div>
    </div>
    <div class="positioner pos-pause">
        <div class="floater float-pause">
            <div class="shape shape-pause-container">
                <div class="shape-pause-bar"></div>
                <div class="shape-pause-bar"></div>
            </div>
        </div>
    </div>

    <div class="main-content-wrapper">
        <div class="glitch-wrapper" id="logoClick">
            <h1 class="glitch" data-text="PARALLEL LEE">PARALLEL LEE</h1>
        </div>
        <br>
        <div class="role-container"><span class="role-item">Creator</span><span class="role-dot">Â·</span><span
                class="role-item">Musician</span><span class="role-dot">Â·</span><span class="role-item">Designer</span>
        </div>
    </div>

    <div class="nav">
        <a class="nav-link" data-target="projects">Projects</a>
        <a class="nav-link" data-target="resume">Resume</a>
        <a class="nav-link" data-target="link">Link</a>
    </div>

    <div class="content-layer">
        <h2 id="contentTitle">PROJECTS</h2>
        <div class="content-box">
            <p>COMING SOON</p>
        </div>
        <button class="close-btn" id="closeBtn">Back to Desk</button>
    </div>

    <script>
        const systemBtn = document.getElementById('systemBtn'); const body = document.body;
        function toggleMode() { body.classList.toggle('dark-mode'); systemBtn.innerText = body.classList.contains('dark-mode') ? "SYSTEM: OFFLINE" : "SYSTEM: ONLINE"; }

        const logoClick = document.getElementById('logoClick');
        const glitchBox = logoClick;
        let touchTimer;
        glitchBox.addEventListener('touchstart', (e) => { e.preventDefault(); glitchBox.classList.add('glitching-active'); });
        glitchBox.addEventListener('touchend', (e) => { e.preventDefault(); glitchBox.classList.remove('glitching-active'); toggleMode(); });
        glitchBox.addEventListener('click', (e) => { toggleMode(); });
        systemBtn.addEventListener('click', toggleMode);

        const btnFreeze = document.getElementById('btnFreeze'); const btnTrail = document.getElementById('btnTrail'); const btnGrid = document.getElementById('btnGrid');
        let trailEnabled = true;
        function toggleFreeze() { body.classList.toggle('paused'); btnFreeze.classList.toggle('active'); }
        function toggleTrail() { trailEnabled = !trailEnabled; btnTrail.classList.toggle('active'); }
        function toggleGrid() { body.classList.toggle('hide-grid'); btnGrid.classList.toggle('active'); }
        btnFreeze.addEventListener('click', toggleFreeze); btnTrail.addEventListener('click', toggleTrail); btnGrid.addEventListener('click', toggleGrid);

        document.addEventListener('keydown', (e) => {
            if (['INPUT', 'TEXTAREA'].includes(e.target.tagName)) return;
            const key = e.key.toLowerCase();
            if (key === 'f') toggleFreeze(); if (key === 't') toggleTrail(); if (key === 'g') toggleGrid(); if (key === 's') toggleMode();
        });

        const interactiveShapes = document.querySelectorAll('.shape-triangle, .shape-circle-shadow, .shape-pause-container');
        // [NEW] ì ¤ë¦¬ ë¬¼ë¦¬ì—”ì§„ ë³€ìˆ˜
        let lastX = 0;
        let tiltX = 0;

        function handleMove(x, y) {
            // ì±…ìƒ ì¹˜ì› ì„ ë• ì¤‘ì§€
            if (body.classList.contains('cleared')) return;

            // íŠ¸ë ˆì¼ íš¨ê³¼ (ê¸°ì¡´ ìœ ì§€)
            if (trailEnabled) {
                const trail = document.createElement('div'); trail.className = 'cursor-trail';
                trail.style.left = `${x}px`; trail.style.top = `${y}px`;
                const colors = ['#FFD700', '#FF0055', '#0099FF']; trail.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                document.body.appendChild(trail); setTimeout(() => trail.remove(), 500);
            }

            if (body.classList.contains('paused')) return;

            // [NEW] ì†ë„ ê³„ì‚° (ì´ë²ˆ ìœ„ì¹˜ - ì§€ë‚œë²ˆ ìœ„ì¹˜ = ì†ë„)
            const velocityX = x - lastX;
            lastX = x;

            // ê´€ì„± ì ìš© (ì†ë„ì˜ 10%ë§Œí¼ ê¸°ìš¸ì„, ìµœëŒ€ 15ë„ ì œí•œ)
            // ë§ˆìš°ìŠ¤ê°€ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ê°€ë©´ ë„í˜•ì€ ì™¼ìª½ìœ¼ë¡œ ì ë¦¬ëŠ” ë“¯í•œ ì €í•­ê°
            tiltX = Math.max(Math.min(velocityX * -0.1, 15), -15);

            const cx = window.innerWidth / 2; const cy = window.innerHeight / 2;
            const mx = (cx - x) / 100; const my = (cy - y) / 100;

            interactiveShapes.forEach(shape => {
                let speed = 0.05;
                if (shape.classList.contains('shape-circle-shadow')) speed = -0.08;
                if (shape.classList.contains('shape-pause-container')) speed = 0.04;
                if (shape.classList.contains('shape-rect')) speed = -0.02;

                // [NEW] skewX(${tiltX}deg) ì¶”ê°€ -> ì´ê²Œ ì ¤ë¦¬ íš¨ê³¼ì˜ í•µì‹¬!
                // ê¸°ì¡´ íšŒì „ê°’ì— + ê¸°ìš¸ê¸°(tilt)ë¥¼ ë”í•´ì„œ íœ˜ì²­ê±°ë¦¬ê²Œ ë§Œë“¦
                shape.style.transform = `translate(${mx * speed * 100}px, ${my * speed * 100}px) rotate(${mx * speed * 100 + tiltX}deg) skewX(${tiltX}deg)`;
            });
        }
        document.addEventListener('mousemove', e => handleMove(e.pageX, e.pageY));
        document.addEventListener('touchmove', e => { if (!body.classList.contains('allow-scroll')) { } handleMove(e.touches[0].pageX, e.touches[0].pageY); }, { passive: false });

        const navLinks = document.querySelectorAll('.nav-link'); const closeBtn = document.getElementById('closeBtn'); const contentTitle = document.getElementById('contentTitle');
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault(); const target = link.getAttribute('data-target');
                body.classList.remove('mode-projects', 'mode-resume', 'mode-link'); body.classList.add(`mode-${target}`);
                contentTitle.innerText = target; body.classList.add('cleared'); body.classList.add('allow-scroll');
            });
        });
        closeBtn.addEventListener('click', () => { body.classList.remove('cleared'); body.classList.remove('allow-scroll'); });
        // [NEW] ì¤‘ë ¥ì¥ ìƒì„±ê¸° (Gravity Field)
        function createGravity(x, y) {
            const hole = document.createElement('div');
            hole.className = 'gravity-hole';
            hole.style.left = `${x}px`;
            hole.style.top = `${y}px`;
            document.body.appendChild(hole);

            // ì• ë‹ˆë©”ì´ì…˜ ëë‚˜ë©´(0.6s) ì‚­ì œ (ì“°ë ˆê¸° ìˆ˜ê±°)
            setTimeout(() => hole.remove(), 600);
        }

        // 1. ë°ìŠ¤í¬íƒ‘: í´ë¦­ ì‹œ ë°œë™
        document.addEventListener('click', (e) => {
            // ë²„íŠ¼ì´ë‚˜ ë§í¬ë¥¼ ëˆŒë €ì„ ë• ë°œë™ ì•ˆ í•˜ê²Œ (ë¹ˆ ê³µê°„ë§Œ)
            if (e.target.tagName === 'A' || e.target.tagName === 'BUTTON') return;
            createGravity(e.clientX, e.clientY);
        });

        // 2. ëª¨ë°”ì¼: ê¾¹ ëˆ„ë¥´ê¸° (Long Press) ê°ì§€
        let longPressTimer;
        const longPressDuration = 500; // 0.5ì´ˆ ê¾¹ ëˆ„ë¥´ë©´ ë°œë™

        document.addEventListener('touchstart', (e) => {
            // ë²„íŠ¼ ë“±ì€ ì œì™¸
            if (e.target.tagName === 'A' || e.target.tagName === 'BUTTON') return;

            const touch = e.touches[0];
            const x = touch.clientX;
            const y = touch.clientY;

            longPressTimer = setTimeout(() => {
                createGravity(x, y);
                // ê¾¹ ëˆŒë €ë‹¤ëŠ” ì§„ë™ í”¼ë“œë°± (ëª¨ë°”ì¼ ì§€ì› ê¸°ê¸°ë§Œ)
                if (navigator.vibrate) navigator.vibrate(50);
            }, longPressDuration);
        }, { passive: true });

        document.addEventListener('touchend', () => {
            clearTimeout(longPressTimer); // ì† ë–¼ë©´ íƒ€ì´ë¨¸ ì·¨ì†Œ
        });
        document.addEventListener('touchmove', () => {
            clearTimeout(longPressTimer); // ì›€ì§ì´ë©´ íƒ€ì´ë¨¸ ì·¨ì†Œ (ìŠ¤í¬ë¡¤ í•  ë•Œ ì˜¤ì‘ë™ ë°©ì§€)
        });
        // [NEW] ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì‹œìŠ¤í…œ (Draggable Physics)
        // 3. [í•µì‹¬] ì•ˆì „ ë“œë˜ê·¸ ì—”ì§„ (Safety Drag)
        const draggables = document.querySelectorAll('.positioner');
        let activeItem = null;
        let startX = 0, startY = 0;
        let startMarginLeft = 0, startMarginTop = 0;

        draggables.forEach(item => {
            item.addEventListener('mousedown', dragStart);
            item.addEventListener('touchstart', dragStart, { passive: false });
        });

        function dragStart(e) {
            if (body.classList.contains('cleared')) return;

            activeItem = this;
            // ë“œë˜ê·¸ ì‹œì‘í•  ë•Œ íŠ¸ëœì§€ì…˜ì„ êº¼ì„œ ì¦‰ê° ë°˜ì‘í•˜ê²Œ í•¨
            activeItem.style.transition = "none";

            if (e.type === 'touchstart') {
                startX = e.touches[0].clientX;
                startY = e.touches[0].clientY;
            } else {
                e.preventDefault();
                startX = e.clientX;
                startY = e.clientY;
            }

            // í˜„ì¬ í”½ì…€ ìœ„ì¹˜ ì €ì¥
            const style = window.getComputedStyle(activeItem);
            startMarginLeft = parseFloat(style.marginLeft);
            startMarginTop = parseFloat(style.marginTop);
        }

        function drag(e) {
            if (!activeItem) return;
            e.preventDefault();

            let clientX, clientY;
            if (e.type === 'touchmove') {
                clientX = e.touches[0].clientX;
                clientY = e.touches[0].clientY;
            } else {
                clientX = e.clientX;
                clientY = e.clientY;
            }

            const dx = clientX - startX;
            const dy = clientY - startY;

            // ë§ˆì§„ì„ í”½ì…€ ë‹¨ìœ„ë¡œ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
            activeItem.style.marginLeft = `${startMarginLeft + dx}px`;
            activeItem.style.marginTop = `${startMarginTop + dy}px`;
        }

        function dragEnd() {
            if (!activeItem) return;

            // 1. í˜„ì¬ ìœ„ì¹˜ íŒŒì•…
            const style = window.getComputedStyle(activeItem);
            const currentLeft = parseFloat(style.marginLeft);
            const currentTop = parseFloat(style.marginTop);

            // 2. í™”ë©´ ë¹„ìœ¨(%)ë¡œ ë³€í™˜
            let vw = (currentLeft / window.innerWidth) * 100;
            let vh = (currentTop / window.innerHeight) * 100;

            // 3. [ê°€ë“œë ˆì¼] í™”ë©´ ë°– ê°€ì¶œ ë°©ì§€
            vw = Math.max(Math.min(vw, 45), -45);
            vh = Math.max(Math.min(vh, 45), -45);

            // 4. ìœ„ì¹˜ ì ìš©
            activeItem.style.marginLeft = `${vw}vw`;
            activeItem.style.marginTop = `${vh}vh`;

            // 5. [í•µì‹¬ ìˆ˜ì •] ë¶€ë“œëŸ¬ìš´ ì›€ì§ì„ ë³µêµ¬
            // activeItemì„ nullë¡œ ë§Œë“¤ê¸° ì „ì—, 'currentItem'ì´ë¼ëŠ” ë³€ìˆ˜ì— ë²”ì¸ì„ í™•ë³´í•´ë‘¡ë‹ˆë‹¤.
            const currentItem = activeItem;

            setTimeout(() => {
                // í™•ë³´í•´ë‘” currentItemì—ê²Œ ëª…ë ¹ì„ ë‚´ë¦½ë‹ˆë‹¤. (ì´ì œ ì—ëŸ¬ ì•ˆ ë‚¨!)
                // style.transition = "" ë¡œ ë¹„ì›Œì£¼ë©´, ì›ë˜ CSS íŒŒì¼ì— ìˆëŠ” transition ê·œì¹™ì´ ë˜ì‚´ì•„ë‚©ë‹ˆë‹¤.
                currentItem.style.transition = "";
            }, 50);

            activeItem = null; // ì´ì œ ì•ˆì‹¬í•˜ê³  ì§€ì›Œë„ ë¨
        }

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        document.addEventListener('mousemove', drag);
        document.addEventListener('mouseup', dragEnd);
        document.addEventListener('touchmove', drag, { passive: false });
        document.addEventListener('touchend', dragEnd);
    </script>
</body>

</html>